{{ 'faq-accordion.css' | asset_url | stylesheet_tag }}

{% style %}
  #shopify-section-{{ section.id }}
   {
     --color-foreground: {{ section.settings.colors_text.red }}, {{ section.settings.colors_text.green }}, {{ section.settings.colors_text.blue }};
     --color-link: var(--color-foreground);
     --color-border: var(--color-foreground);
     --color-heading: var(--color-foreground);
     --color-button-background: {{ section.settings.colors_button_background.red }}, {{ section.settings.colors_button_background.green }}, {{ section.settings.colors_button_background.blue }};
     --color-button-text: {{ section.settings.colors_button_label.red }}, {{ section.settings.colors_button_label.green }}, {{ section.settings.colors_button_label.blue }};
     --color-button-border: var(--color-button-background);
     --color-shadow: var(--color-foreground);
   }
{% endstyle %}

<style>
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_mob }}px;
    padding-bottom: {{ section.settings.padding_bottom_mob }}px;
    background-color:{{ section.settings.colors_background }};
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

   #shopify-section-{{ section.id }} .faq-accordion-section {
    {% if section.settings.background_image != blank %}
      background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      /* This next line is important to remove the color scheme's background */
      background-color: transparent;
    {% endif %}
  }
  #shopify-section-{{ section.id }} .faq-accordion-custom .btn-box {
    background-color: {{ section.settings.box_bg_color }};
    color: {{ section.settings.box_text_color }};
  }
  #shopify-section-{{ section.id }} .box-caption,
  #shopify-section-{{ section.id }} .box-desc {
    color: {{ section.settings.box_text_color }};
  }
  #shopify-section-{{ section.id }} .faq-accordion-custom .btn-box .button.get-in-touch-btn {
    background-color: {{ section.settings.btn_bg_color }};
    color: {{ section.settings.btn_text_color }};
    font-weight: 700;
  }
  #shopify-section-{{ section.id }} .faq-accordion-custom .accordion-item {
    overflow: hidden;
    background: {{ section.settings.faq_bg_color }};
  }
  #shopify-section-{{ section.id }} .faq-accordion-custom .quest,
  #shopify-section-{{ section.id }} .faq-accordion-custom .ans-inner {
    color: {{ section.settings.faq_text_color }} !important;
  }
</style>

<div class="faq-accordion-section">
  <div class="section-{{ section.id }}-padding">
    <div class="page-width">
      <div class="faq-accordion-custom">
        <div class="left-container">
          <h2 class="h1 heading">{{ section.settings.heading }}</h2>
          <div class="btn-box ">
            <p class="box-caption h3">{{ section.settings.caption }}</p>
            <p class="box-desc">{{ section.settings.desc }}</p>
            <a class="button button--secondary get-in-touch-btn" href="{{ section.settings.btn-link }}">
              {{- section.settings['btn-label'] -}}
            </a>
          </div>
        </div>
        <div class="right-container">
          <div class="custom-accordions-wrapper">
            {% for block in section.blocks %}
              <div class="accordion-item {% if forloop.index == 2 %}active{% endif %}">
                <div class="quest-wrapper">
                  <h4 class="title quest">{{ block.settings.quest }}</h4>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                    focusable="false"
                    class="icon icon-chevron"
                    fill="none"
                    viewBox="0 0 32 32"
                  >
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.521-0.521-1.365-0.521-1.885 0s-0.521 1.365 0 1.885l7.057 7.057-7.057 7.057c-0.521 0.521-0.521 1.365 0 1.885s1.365 0.521 1.885 0z" fill="currentColor"/>
                  </svg>
                </div>
                <div class="ans-content">
                  <div class="ans-inner typeset">{{ block.settings.ans_content }}</div>
                </div>
              </div>
            {% endfor %}
            <div class="disclaimer">{{ section.settings.disclaimer }}</div>
          </div>
          {% comment %}
            <div class="btn-box medium-hide large-up-hide">
              <p class="box-caption h3">{{ section.settings.caption }}</p>
              <p class="box-desc">{{ section.settings.desc }}</p>
              <a class="button get-in-touch-btn" href="{{ section.settings.btn-link }}">{{ section.settings.btn-label }}</a>
            </div>
          {% endcomment %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const accordionItems = document.querySelectorAll('#shopify-section-{{ section.id }} .accordion-item');

    accordionItems.forEach((item) => {
      const header = item.querySelector('.quest-wrapper');
      const content = item.querySelector('.ans-content');

      if (item.classList.contains('active')) {
        content.style.maxHeight = content.scrollHeight + 'px';
      } else {
        content.style.maxHeight = '0';
      }

      header.addEventListener('click', () => {
        accordionItems.forEach((otherItem) => {
          if (otherItem !== item) {
            otherItem.classList.remove('active');
            const otherContent = otherItem.querySelector('.ans-content');
            otherContent.style.maxHeight = '0';
          }
        });

        item.classList.toggle('active');

        if (item.classList.contains('active')) {
          content.style.maxHeight = content.scrollHeight + 'px';
        } else {
          content.style.maxHeight = '0';
          icon.removeAttribute('transform');
        }
      });
    });

    window.addEventListener('resize', function () {
      document.querySelectorAll('.accordion-item.active .ans-content').forEach((content) => {
        content.style.maxHeight = content.scrollHeight + 'px';
      });
    });
  });
</script>

{% schema %}
{
  "name": "FAQ V1",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "text",
      "id": "caption",
      "label": "Button Box Caption",
      "default": "We're here to help!"
    },
    {
      "type": "text",
      "id": "desc",
      "label": "Button Box Description",
      "default": "Get in touch with customer care"
    },
    {
      "type": "text",
      "id": "btn-label",
      "label": "Button Label",
      "default": "Contact Us"
    },
    {
      "type": "url",
      "id": "btn-link",
      "label": "Button Link"
    },
    {
      "type": "color",
      "id": "colors_background",
      "label": "Section Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "box_bg_color",
      "label": "Box Background Color",
      "default": "#FF3C00"
    },
    {
      "type": "color",
      "id": "box_text_color",
      "label": "Box Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "btn_bg_color",
      "label": "Button Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "btn_text_color",
      "label": "Button Text Color",
      "default": "#FF3C00"
    },
    {
      "type": "color",
      "id": "faq_bg_color",
      "label": "faq background color",
      "default": "#FF3C00"
    },
    {
      "type": "color",
      "id": "faq_text_color",
      "label": "faq text color",
      "default": "#000000"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image"
    },
    {
      "type": "text",
      "id": "disclaimer",
      "label": "Disclaimer",
      "default": "*Disclaimer: This program is intended for adults who qualify after a medical evaluation. Results may vary."
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Desktop top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Desktop bottom padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_top_mob",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Mobile top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom_mob",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Mobile bottom padding",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "FAQ item",
      "settings": [
        {
          "type": "text",
          "id": "quest",
          "label": "Question",
          "default": "Do Peachy Paradise products come with a guarantee?"
        },
        {
          "type": "richtext",
          "id": "ans_content",
          "label": "Answer",
          "default": "<p>Lorem ipsum dolor sit amet consectetur, id aliquet malesuada nisl vulputate nulla ut elit. Ut inties iutio sed epremmentum erat.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ v1",
      "category": "Custom",
      "blocks": [
        {
          "type": "question",
          "settings": {
            "quest": "Do Peachy Paradise products come with a guarantee?",
            "ans_content": "<p>Lorem ipsum dolor sit amet consectetur, id aliquet malesuada nisl vulputate nulla ut elit. Ut inties iutio sed epremmentum erat.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "quest": "Will creatine make me bulky?",
            "ans_content": "<p>Lorem ipsum dolor sit amet consectetur. Porttitor amet ante maecenas armet ac nisl. Eros nam a purus volutpat.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "quest": "Can I take it without working out?",
            "ans_content": "<p>Lorem ipsum dolor sit amet consectetur, id aliquet malesuada nisl vulputate nulla ut elit.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
